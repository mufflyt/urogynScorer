% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/score_pgii.R
\name{score_pgii}
\alias{score_pgii}
\title{Score the Patient Global Impression of Improvement (PGI-I)}
\usage{
score_pgii(
  patient_data,
  item_name,
  id_column = "Record_ID",
  keep_n_valid = FALSE,
  verbose = FALSE,
  output_file = NULL
)
}
\arguments{
\item{patient_data}{A data frame containing the PGI-I response variable.}

\item{item_name}{The column name in the data frame that contains the PGI-I response.
This must be a valid column in patient_data containing values 1-7 or NA.}

\item{id_column}{Character string specifying the column name containing patient
identifiers. Default is "Record_ID".}

\item{keep_n_valid}{Logical, whether to return the number of valid, non-missing
responses in the output. Default is FALSE.}

\item{verbose}{Logical indicating whether to print detailed logging messages.
Default is FALSE.}

\item{output_file}{Character string specifying the path to save the results.
If NULL (default), results are not saved to a file.}
}
\value{
A data frame containing:
\itemize{
\item \strong{pgii_score} - The original PGI-I response score (1-7 or NA)
\item \strong{pgii_improved} - A binary variable indicating if the patient
reported improvement (1 = improvement \link{scores 1-3}, 0 = no improvement/worsening \link{scores 4-7})
\item \strong{pgii_n_valid} - (Optional) The number of valid responses
}
}
\description{
Scores the PGI-I, a single-item measure assessing patient-reported
improvement following treatment. The function includes robust input validation,
detailed logging, and handles missing values according to scoring guidelines.
}
\details{
The PGI-I is a single-item global rating scale where patients rate their
improvement after treatment on a scale from 1 (very much better) to 7 (very much worse).
Lower scores indicate better perceived improvement.

PGI-I response scale:
\itemize{
\item 1: Very much better
\item 2: Much better
\item 3: A little better
\item 4: No change
\item 5: A little worse
\item 6: Much worse
\item 7: Very much worse
}
}
\section{How Missing Data is Handled}{

If the PGI-I response is missing (NA), the function will return NA for the score
and the binary improvement indicator.
}

\examples{
# Example 1: Basic usage with default parameters
patient_data <- data.frame(
  Record_ID = c("P001", "P002", "P003", "P004"),
  pgii_response = c(1, 3, 5, NA)
)

pgii_scores <- score_pgii(
  patient_data = patient_data,
  item_name = "pgii_response",
  id_column = "Record_ID",
  keep_n_valid = FALSE,
  verbose = TRUE
)
print(pgii_scores)

# Example 2: With custom ID column and including count of valid responses
patient_data <- data.frame(
  PatientID = c("A", "B", "C", "D", "E"),
  Treatment = c("Drug", "Placebo", "Drug", "Drug", "Placebo"),
  GlobalImpression = c(2, 4, 1, 3, 6)
)

pgii_scores <- score_pgii(
  patient_data = patient_data,
  item_name = "GlobalImpression",
  id_column = "PatientID",
  keep_n_valid = TRUE,
  verbose = TRUE
)
print(pgii_scores)

# Example 3: Save results to file
patient_data <- data.frame(
  Record_ID = 1:5,
  pgii_response = c(2, 3, 4, 1, NA)
)

temp_file <- tempfile(fileext = ".csv")
pgii_scores <- score_pgii(
  patient_data = patient_data,
  item_name = "pgii_response",
  output_file = temp_file,
  verbose = TRUE
)
# Results saved to temp_file

}
\references{
Yalcin, I., & Bump, R. C. (2003). Validation of two global impression questionnaires
for incontinence. \emph{American Journal of Obstetrics and Gynecology, 189}(1), 98-101.
}
