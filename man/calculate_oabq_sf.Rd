% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_oabq_sf.R
\name{calculate_oabq_sf}
\alias{calculate_oabq_sf}
\title{Calculate OAB-q SF (Overactive Bladder Questionnaire Short Form) Scores}
\usage{
calculate_oabq_sf(
  questionnaire_data,
  id_column = NULL,
  item_prefix = "oab_",
  symptom_items = 1:6,
  hrql_items = 7:19,
  symptom_missing_threshold = 0.5,
  hrql_missing_threshold = 0.5,
  verbose = FALSE
)
}
\arguments{
\item{questionnaire_data}{A data frame containing OAB-q SF item responses. Column
names should follow the pattern specified by the \code{item_prefix} parameter followed
by the item number (e.g., "oab_1", "oab_2", etc.).}

\item{id_column}{Character string specifying the column name containing patient
identifiers. If NULL (default), no ID column is used.}

\item{item_prefix}{A character string specifying the prefix for OAB-q SF column names.
Default is "oab_".}

\item{symptom_items}{A numeric vector specifying which items belong to the symptom
bother scale. Default is items 1-6.}

\item{hrql_items}{A numeric vector specifying which items belong to the health-related
quality of life scale. Default is items 7-19.}

\item{symptom_missing_threshold}{Numeric value between 0 and 1 specifying the maximum
proportion of missing values allowed for the symptom scale. Default is 0.5 (50\%).}

\item{hrql_missing_threshold}{Numeric value between 0 and 1 specifying the maximum
proportion of missing values allowed for the HRQL scale. Default is 0.5 (50\%).}

\item{verbose}{Logical indicating whether to display detailed logging information.
Default is FALSE.}
}
\value{
A data frame containing the original data plus additional columns:
\itemize{
\item \strong{symptom_score}: The OAB-q SF Symptom Bother scale score,
transformed to a 0-100 scale where higher scores indicate greater
symptom bother.
\item \strong{hrql_score}: The OAB-q SF Health-Related Quality of Life scale
score, transformed to a 0-100 scale where higher scores indicate better
quality of life.
\item \strong{symptom_missing}: Count of missing items in the Symptom Bother scale.
\item \strong{hrql_missing}: Count of missing items in the HRQL scale.
\item \strong{symptom_valid}: Logical indicating if the Symptom Bother score is
valid (TRUE if missing proportion <= symptom_missing_threshold).
\item \strong{hrql_valid}: Logical indicating if the HRQL score is valid
(TRUE if missing proportion <= hrql_missing_threshold).
\item \strong{total_valid}: Logical indicating if both scores are valid.
}
}
\description{
Calculates scores for the Overactive Bladder Questionnaire Short Form (OAB-q SF),
a validated instrument measuring symptom bother and health-related quality of life
in patients with overactive bladder. The function includes robust validation,
handles missing data according to scoring guidelines, and includes detailed logging.
}
\details{
The OAB-q SF consists of 19 items across two scales:
\itemize{
\item \strong{Symptom Bother} (6 items): Measures the degree of bother associated
with overactive bladder symptoms.
\item \strong{Health-Related Quality of Life} (13 items): Measures the impact
of overactive bladder on various aspects of quality of life.
}

Each item is scored from 1-6, with higher scores indicating greater bother for the
Symptom scale and better quality of life for the HRQL scale.

Missing data is handled according to established guidelines:
\itemize{
\item If more than 50\% of items (or a custom threshold) are missing in a scale,
that scale's score is set to NA.
\item If fewer items are missing, the mean of completed items is used to impute
missing values.
}

Scores are transformed to a 0-100 scale using the formula:
\deqn{Transformed Score = \frac{(Raw Score - Min) \times 100}{(Max - Min)}}
}
\examples{
# Example 1: Basic usage with minimal data
oab_data <- data.frame(
  patient_id = c("P001", "P002", "P003"),
  oab_1 = c(2, 4, 3),  # Symptom items (1-6)
  oab_2 = c(3, 5, 2),
  oab_3 = c(4, 3, 1),
  oab_4 = c(2, 4, 3),
  oab_5 = c(3, 2, 4),
  oab_6 = c(1, 3, 2),
  oab_7 = c(4, 2, 5),  # HRQL items (7-19)
  oab_8 = c(5, 3, 4),
  oab_9 = c(3, 4, 5),
  oab_10 = c(4, 3, 4),
  oab_11 = c(5, 2, 3),
  oab_12 = c(4, 3, 5),
  oab_13 = c(3, 4, 4),
  oab_14 = c(5, 3, 3),
  oab_15 = c(4, 5, 4),
  oab_16 = c(3, 4, 5),
  oab_17 = c(4, 3, 4),
  oab_18 = c(5, 4, 3),
  oab_19 = c(4, 5, 4)
)

oab_results <- calculate_oabq_sf(
  questionnaire_data = oab_data,
  id_column = "patient_id",
  verbose = TRUE
)
print(oab_results)

# Example 2: With data containing missing values
oab_data_missing <- data.frame(
  patient_id = c("P001", "P002", "P003"),
  oab_1 = c(2, 4, NA),
  oab_2 = c(3, 5, 2),
  oab_3 = c(4, NA, 1),
  oab_4 = c(2, 4, 3),
  oab_5 = c(3, 2, 4),
  oab_6 = c(1, 3, 2),
  oab_7 = c(4, 2, 5),
  oab_8 = c(5, 3, 4),
  oab_9 = c(3, NA, 5),
  oab_10 = c(4, 3, 4),
  oab_11 = c(5, 2, NA),
  oab_12 = c(4, 3, 5),
  oab_13 = c(3, 4, 4),
  oab_14 = c(5, NA, 3),
  oab_15 = c(4, 5, 4),
  oab_16 = c(3, 4, 5),
  oab_17 = c(4, 3, 4),
  oab_18 = c(5, 4, NA),
  oab_19 = c(4, 5, 4)
)

oab_results_missing <- calculate_oabq_sf(
  questionnaire_data = oab_data_missing,
  id_column = "patient_id",
  symptom_missing_threshold = 0.3,
  hrql_missing_threshold = 0.3,
  verbose = TRUE
)
print(oab_results_missing)

# Example 3: With alternative column naming convention
alt_oab_data <- data.frame(
  record_id = c("R1", "R2", "R3"),
  oabq_item_1 = c(2, 4, 3),
  oabq_item_2 = c(3, 5, 2),
  oabq_item_3 = c(4, 3, 1),
  oabq_item_4 = c(2, 4, 3),
  oabq_item_5 = c(3, 2, 4),
  oabq_item_6 = c(1, 3, 2),
  oabq_item_7 = c(4, 2, 5),
  oabq_item_8 = c(5, 3, 4),
  oabq_item_9 = c(3, 4, 5),
  oabq_item_10 = c(4, 3, 4),
  oabq_item_11 = c(5, 2, 3),
  oabq_item_12 = c(4, 3, 5),
  oabq_item_13 = c(3, 4, 4),
  oabq_item_14 = c(5, 3, 3),
  oabq_item_15 = c(4, 5, 4),
  oabq_item_16 = c(3, 4, 5),
  oabq_item_17 = c(4, 3, 4),
  oabq_item_18 = c(5, 4, 3),
  oabq_item_19 = c(4, 5, 4)
)

oab_results_alt <- calculate_oabq_sf(
  questionnaire_data = alt_oab_data,
  id_column = "record_id",
  item_prefix = "oabq_item_",
  verbose = TRUE
)
print(oab_results_alt)

}
\references{
Coyne, K. S., Thompson, C. L., Lai, J. S., & Sexton, C. C. (2015).
An overactive bladder symptom and health-related quality of life short-form:
validation of the OAB-q SF. \emph{Neurourology and Urodynamics, 34}(3), 255-263.
}
