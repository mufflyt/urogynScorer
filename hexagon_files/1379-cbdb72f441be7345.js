"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1379],{89705:function(e,n,t){t.d(n,{EM:function(){return l},b8:function(){return s}});var i=t(5362),r=t(27218),a=t(27895),u=t(13262),o=t(10228),c=t(77930);let l=()=>{let{account:e,activeOrganization:n}=(0,r.t)(),t=null==e?void 0:e.uuid,l=null==n?void 0:n.uuid,{addError:s}=(0,a.e)(),d=(0,c.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(l,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{d.invalidateQueries({queryKey:[u.dY,{orgUuid:l,accountUuid:t,syncSourceType:o.Fg.GDRIVE}]})},300)},onError:e=>{s(e)}})},s=()=>{let{activeOrganization:e}=(0,r.t)(),n=null==e?void 0:e.uuid,{addError:t}=(0,a.e)(),l=(0,c.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(n,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{l.invalidateQueries({queryKey:[u.dY,{orgUuid:n,syncSourceType:o.Fg.GDRIVE}]})},onError:e=>{t(e)}})}},78880:function(e,n,t){t.d(n,{E4:function(){return L},En:function(){return Z},J$:function(){return et},JQ:function(){return R},M1:function(){return F},MN:function(){return M},Mr:function(){return ec},Mv:function(){return j},N:function(){return G},P8:function(){return eo},QD:function(){return K},RS:function(){return en},Rs:function(){return w},Xv:function(){return $},Y$:function(){return ed},Yn:function(){return Q},Zf:function(){return ee},f0:function(){return z},gQ:function(){return X},gb:function(){return ey},hJ:function(){return k},j5:function(){return eh},lP:function(){return eu},mD:function(){return J},nC:function(){return Y},sf:function(){return ef},sv:function(){return q},tc:function(){return I},td:function(){return B},tr:function(){return x},vc:function(){return ei},wR:function(){return O},xm:function(){return e_},xn:function(){return P},yb:function(){return er}});var i,r,a,u,o,c,l=t(19170),s=t(5362),d=t(27218),g=t(27895),f=t(30947),_=t(95622),v=t(14448),y=t(13262),h=t(10228),p=t(77930),m=t(81695),b=t(7653),E=t(21878),S=t(51879),C=t(22534),T=t(89705);let w="drive_indexing_enablement_2/11_1",A="gdrive_success",D="github_success";(i=u||(u={})).PENDING="pending",i.STARTED="started",i.COMPLETED="completed",i.FAILED="failed",(r=o||(o={})).PATH_NOT_FOUND="path_not_found",r.INVALID_SHA="invalid_sha",r.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",r.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed",(a=c||(c={})).NOT_AUTHENTICATED="not_authenticated",a.NOT_AUTHORIZED="not_authorized",a.CAN_ACCESS="can_access";let k=e=>e.type===h.Fg.GITHUB?{sync_source_type:h.Fg.GITHUB,sync_source_config:e.config}:e.type===h.Fg.GDRIVE?{sync_source_type:h.Fg.GDRIVE,sync_source_config:e.config}:null,I=()=>{let{activeOrganization:e}=(0,d.t)(),n=null==e?void 0:e.uuid,{value:t}=(0,v.F)("nighthawk_enabled"),{value:i}=(0,v.F)("kingfisher_enabled"),{value:r}=(0,v.F)("spider_enabled_2"),{value:a}=(0,v.F)("cinnabon_enabled");return(0,s.WE)("/api/organizations/".concat(n,"/sync/settings"),{queryKey:[y.FU,{orgUUID:n}],enabled:!!(e&&(t||i||r||a))})},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,{value:i}=(0,v.F)("nighthawk_enabled"),{value:r}=(0,v.F)("kingfisher_enabled"),{value:a}=(0,v.F)("spider_enabled_2"),{value:u}=(0,v.F)("cinnabon_enabled"),o=(0,p.useQueryClient)();return(0,s.Ne)("/api/organizations/".concat(t,"/sync/settings"),"PUT",(e,n)=>{let{type:t,enabled:i}=e;n||(n=[]);let r=n.map(e=>e.type===t?{...e,enabled:i}:e);return r.some(e=>e.type===t)?r:[...n,{type:t,enabled:i}]},{queryKey:[y.FU,{orgUUID:t}],enabled:!!(n&&(i||r||a||u)),onSuccess:async function(){for(var n,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];await o.invalidateQueries({queryKey:[y.FU,{orgUUID:t}]}),await (null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,...r))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,i=(0,p.useQueryClient)(),{value:r}=(0,v.F)("kingfisher_enabled"),{value:a}=(0,v.F)("apps_use_bananagrams");return(0,s.Ne)("/api/organizations/".concat(t,"/sync/settings/config"),"POST",(e,n)=>{let{type:t,config:i}=e;return n||(n=[]),n.map(e=>e.type===t?{...e,config:{...e.config,...i}}:e)},{queryKey:[y.FU,{orgUUID:t}],enabled:!!(n&&r&&a),onSuccess:async function(){for(var n,r=arguments.length,a=Array(r),u=0;u<r;u++)a[u]=arguments[u];await i.invalidateQueries({queryKey:[y.FU,{orgUUID:t}]}),await (null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,...a))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},O=()=>{let{value:e}=(0,v.F)("apps_use_bananagrams");return e},R=()=>{let e=L(),n=(0,d.rW)(),{value:t}=(0,v.F)("apps_use_bananagrams");return e&&n&&t},x=()=>{let e=R(),n=(0,d.Cf)(),{data:t}=I(),i=!!n&&!(null==t?void 0:t.find(e=>{var n;return e.type===h.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)}));return e&&!i},z=()=>{let{isDismissed:e}=(0,E.K)(),n=e(w),t=x(),i=V();return t&&!n&&i},q=()=>{let{account:e}=(0,d.t)(),{mutate:n}=(0,l.Ck)(),t=(0,d.Cf)(),{data:i}=I(),r=!!t&&!(null==i?void 0:i.find(e=>{var n;return e.type===h.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)})),{mutate:a}=(0,T.EM)(),{enabled_bananagrams:u,enabled_gdrive_indexing:o}=(null==e?void 0:e.settings)||{};return{isDriveIndexingDisabledByOrg:r,isDriveSearchEnabled:u,isDriveIndexingEnabled:!r&&o,toggleDriveSearchAndIndexingEnabled:t=>{var i;let{indexingEnabled:r,searchEnabled:u,dismissBanner:o}=t;r&&a({}),n({...null==e?void 0:e.settings,...void 0!==r?{enabled_gdrive_indexing:r}:null,...void 0!==u||!0===r?{enabled_bananagrams:null!=r?r:u}:null,...o?{dismissed_claudeai_banners:[...(null==e?void 0:null===(i=e.settings)||void 0===i?void 0:i.dismissed_claudeai_banners)||[],{banner_id:w,dismissed_at:new Date().toISOString()}]}:null})}}},U=(e,n)=>{let t=new URLSearchParams(Array.from(n.entries()));t.delete(e);let i=t.toString()?"?".concat(t.toString()):"",r=window.location.pathname+i;window.history.replaceState({...window.history.state,as:r,url:r},"",r)},N=e=>{let{callerIdentifier:n,successParam:t,handleOpen:i}=e,r=(0,m.useSearchParams)(),a=(0,b.useRef)(!1);(0,b.useEffect)(()=>{!r.has(t)||a.current||n&&n!==r.get(t)||(a.current=!0,U(t,r),i())},[r,n,i,t])},K=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:t}=(0,d.t)(),i=null==t?void 0:t.uuid,r=(0,m.useRouter)(),a=(0,m.usePathname)(),u=(0,m.useSearchParams)(),{callerIdentifier:o,onAuthSuccess:c}=n,l="gmail"===e||"gcal"===e?"pumpernickel_enabled":"cinnabon_enabled",{value:g}=(0,v.F)(l),f=(0,p.useQueryClient)(),{data:y}=(0,s.WE)("/api/organizations/".concat(i,"/sync/").concat(e,"/auth"),{queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:i}],enabled:!!(t&&g)}),h=(0,b.useRef)(!1),{mutate:E}=(0,s.uC)("/api/organizations/".concat(i,"/sync/").concat(e,"/auth/start"),"POST",{enabled:!!(t&&g),onSuccess:e=>{r.push(e.redirect_url)}});N({callerIdentifier:o,successParam:"".concat(e,"_success"),handleOpen:()=>null==c?void 0:c(!0)});let{mutate:S}=(0,s.uC)("/api/organizations/".concat(i,"/sync/").concat(e,"/auth"),"DELETE",{enabled:!!(t&&g),onSuccess:()=>{f.invalidateQueries({queryKey:["sync_".concat(e,"_auth_status"),{orgUUID:i}]})}});return{isAuthenticated:!!(null==y?void 0:y.is_authenticated),startAuth:()=>{if(!h.current&&g){h.current=!0;let n=H({pathname:a,searchParams:u,queryString:"".concat(e,"_success=").concat(o)});if((0,_.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=".concat(e,"&origin=").concat(n));return}E({pre_auth_state:{origin:n},redirect_uri:new URL("/connect/".concat(e,"/callback"),window.location.origin).toString()})}},disconnect:S}},Q=function(){let{callerIdentifier:e,toggleGithubModalOpen:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,d.t)(),i=null==t?void 0:t.uuid,r=eo(),a=(0,m.useRouter)(),{data:u}=(0,s.WE)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[y.Os,{orgUUID:i}],enabled:!!(t&&r)}),{mutate:o}=(0,s.uC)("/api/organizations/".concat(i,"/sync/github/auth/start"),"POST",{enabled:!!(t&&r),onSuccess:e=>{a.push(e.redirect_url)}}),c="".concat(D,"=").concat(e);N({callerIdentifier:e,successParam:D,handleOpen:()=>{null==n||n(!0)}});let l=(0,m.useSearchParams)(),g=(0,b.useRef)(!1),f=H({pathname:(0,m.usePathname)(),searchParams:l,queryString:c});return{isGithubAuthenticated:!!(null==u?void 0:u.is_authenticated),initGithubAuth:()=>{if(r){if((0,_.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=github&origin=".concat(f));return}g.current||(g.current=!0,o({pre_auth_state:{origin:f}}))}}}},G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,i=eo(),r=(0,p.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&i),...e,onSuccess:function(){for(var n,i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];r.invalidateQueries({queryKey:[y.Os,{orgUUID:t}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...a)}})},M=()=>{let{data:e}=I();return!!(null==e?void 0:e.find(e=>e.type===h.Fg.GDRIVE&&e.enabled))},L=()=>{let e=M(),n=(0,d.Cf)(),{value:t}=(0,v.F)("kingfisher_enabled");return!!(t&&(!n||e))},V=()=>{let{account:e,activeOrganization:n}=(0,d.t)(),t=null==n?void 0:n.uuid,i=L(),{data:r}=(0,s.WE)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[y.Yw,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:i,staleTime:3e5});return!!(null==r?void 0:r.is_authenticated)},W=e=>{let{callerIdentifier:n}=e,t=(0,m.usePathname)(),{account:i,activeOrganization:r}=(0,d.t)(),a=null==i?void 0:i.uuid,u=null==r?void 0:r.uuid,o=L(),c=(0,m.useRouter)(),l=(0,p.useQueryClient)(),g=(0,m.useSearchParams)(),{mutate:f}=(0,s.uC)("/api/organizations/".concat(u,"/sync/mcp/drive/auth/start"),"POST",{enabled:o,onSuccess:e=>{c.push(e.redirect_url)}}),v=(0,b.useRef)(!1);return()=>{if(!o)return;let e=H({pathname:t,searchParams:g,queryString:"".concat(A,"=").concat(n)});if(l.invalidateQueries({queryKey:[y.Yw,{accountUUID:a,orgUUID:u}]}),(0,_.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=gdrive&origin=".concat(e));return}v.current||(v.current=!0,f({pre_auth_state:{origin:e},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},Y=function(){let{callerIdentifier:e,handleAuthSuccess:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=V(),i=z(),{dropdownToOpen:r,openModal:a,clearCallerIdentifier:u}=(0,S.J)(),o=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!t){null==n||n(t);return}i?(a(e),null==n||n(!1)):null==n||n(t)},c=W({callerIdentifier:e});return N({callerIdentifier:e,successParam:A,handleOpen:o}),(0,b.useEffect)(()=>{e&&r===e&&(null==n||n(!0),u())},[r,n,e,u]),{isDriveAuthenticated:t,shouldShowDriveIndexingEnablementModal:i,initDriveAuth:c,handleDriveTrigger:o}},H=e=>{let{pathname:n,searchParams:t,queryString:i}=e,r="".concat(n,"?").concat(i),a=t.get("origin");if(a)r=a;else if((0,_.Rx)()){let e=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,t=n.startsWith("/project/")&&e.test(n.slice(9)),a=n.startsWith("/chat/")&&e.test(n.slice(6));r="claude://claude.ai".concat(t||a||"/new"===n?n:"/new","?").concat(i)}return r},Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),i=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,a=L(),u=(0,p.useQueryClient)(),{mutate:o}=(0,T.b8)();return(0,s.uC)("/api/organizations/".concat(r,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&a),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),c=0;c<t;c++)a[c]=arguments[c];u.invalidateQueries({queryKey:[y.Yw,{accountUUID:i,orgUUID:r}]}),o({}),null===(n=e.onSuccess)||void 0===n||n.call(e,...a)}})},j=e=>{let{documentId:n}=e,{account:t,activeOrganization:i}=(0,d.t)(),r=null==t?void 0:t.uuid,a=null==i?void 0:i.uuid,u=L(),o=(0,p.useQueryClient)(),c=(0,s.WE)("/api/organizations/".concat(a,"/sync/mcp/drive/document/").concat(n),{queryKey:[y.HI,{accountUUID:r,orgUUID:a,documentId:n}],enabled:u,meta:{noToast:!0}}),l=c.isError;return(0,b.useEffect)(()=>{l&&o.invalidateQueries({queryKey:[y.Yw,{accountUUID:r,orgUUID:a}]})},[o,l,r,a]),c};function $(e){let{uri:n}=e,{data:t,isLoading:i}=j({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}}let J=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),i=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,a=L(),u=(0,b.useMemo)(()=>e.map(e=>"/api/organizations/".concat(r,"/sync/mcp/drive/document/").concat(e)),[e,r]),o=(0,b.useMemo)(()=>({queryKey:e.map(e=>[y.Yp,{accountUUID:i,orgUUID:r,documentId:e}]),enabled:a,meta:{noToast:!0}}),[e,i,r,a]);return(0,s.Nl)(u,o)},B=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),i=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,a=L(),u=(0,C.F7)(),{data:o,isSuccess:c,isLoading:l}=(0,s.WE)("/api/organizations/".concat(r,"/sync/mcp/drive/recents"),{queryKey:[y.s8,{accountUUID:i,orgUUID:r}],enabled:e&&a,meta:{noToast:!0}});return(0,b.useEffect)(()=>{if(c&&o){let e=o.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,C.MU)(e)}},[c,o]),{recentDriveDocs:c?o:u,isLoading:l}},X=e=>{let{documentId:n}=e,{account:t,activeOrganization:i}=(0,d.t)(),r=null==t?void 0:t.uuid,a=null==i?void 0:i.uuid,u=et();return(0,s.WE)("/api/organizations/".concat(a,"/sync/mcp/outline/document/").concat(n),{queryKey:[y.q2,{accountUUID:r,orgUUID:a,documentId:n}],enabled:u})},ee=e=>{let{uri:n}=e,{data:t,isLoading:i}=X({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}},en=e=>{let{account:n,activeOrganization:t}=(0,d.t)(),i=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,a=et(),u=(0,b.useMemo)(()=>e.map(e=>"/api/organizations/".concat(r,"/sync/mcp/outline/document/").concat(e)),[e,r]),o=(0,b.useMemo)(()=>({queryKey:e.map(e=>[y.q2,{accountUUID:i,orgUUID:r,documentId:e}]),enabled:a,meta:{noToast:!0}}),[i,e,a,r]);return(0,s.Nl)(u,o)},et=()=>{let{data:e}=I();return!1},ei=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),i=null==t?void 0:t.uuid,r=et(),{data:a,refetch:u}=(0,s.WE)("/api/organizations/".concat(i,"/sync/mcp/outline/auth"),{queryKey:[y.Sp,{accountUUID:null==n?void 0:n.uuid,orgUUID:i}],enabled:!!(t&&r),staleTime:5e3}),{mutate:o,isPending:c}=(0,s.uC)("/api/organizations/".concat(i,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&r),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];null===(n=e.onSuccess)||void 0===n||n.call(e,...i)}});return{isOutlineAuthenticated:!!(null==a?void 0:a.is_authenticated),refetch:u,initOutlineAuth:o,isLoadingOutlineAuthInit:c}},er=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,d.t)(),i=null==n?void 0:n.uuid,r=null==t?void 0:t.uuid,a=et(),u=(0,p.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(r,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&a),...e,onSuccess:function(){for(var n,t=arguments.length,a=Array(t),o=0;o<t;o++)a[o]=arguments[o];u.invalidateQueries({queryKey:[y.Sp,{accountUUID:i,orgUUID:r}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...a)}})},ea=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/profile?redirect_url=".concat(e,"&open_outline_auth=true")},eu=()=>{let{initGithubAuth:e}=Q(),{initDriveAuth:n}=Y();return t=>{t===h.Fg.GITHUB?e():t===h.Fg.GDRIVE?n():t===h.Fg.OUTLINE&&ea()}},eo=()=>{let{data:e}=I(),n=(0,d.Cf)(),{value:t}=(0,v.F)("nighthawk_enabled"),i=!!(null==e?void 0:e.find(e=>e.type===h.Fg.GITHUB&&e.enabled));return!!(t&&(!n||i))},ec=()=>{let{activeOrganization:e}=(0,d.t)(),n=null==e?void 0:e.uuid,t=eo();return(0,s.WE)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[y.wD,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},el=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:r}=(0,d.t)(),a=null==r?void 0:r.uuid,u=eo(),o=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,s.WE)("/api/organizations/".concat(a,"/sync/github/repo?").concat(o),{queryKey:[y.Rz,{orgUUID:a,owner:n,repo:t}],enabled:!!(n&&t&&!i&&r&&u),meta:{noToast:!0}})},es=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:r}=(0,d.t)(),a=null==r?void 0:r.uuid,u=eo();return(0,s.WE)("/api/organizations/".concat(a,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(i),{queryKey:[y.E0,{orgUUID:a,owner:n,repo:t,branch:i}],staleTime:3e5,enabled:!!(n&&t&&i&&r&&u),meta:{noToast:!0}})},ed=e=>{var n;let{owner:t,repo:i,branch:r}=e,a=el({owner:t,repo:i,branch:r}),u=es({owner:t,repo:i,branch:r||(null===(n=a.data)||void 0===n?void 0:n.default_branch)});return{data:{repo:a.data,tree:u.data},isFetching:a.isFetching||u.isFetching,error:a.error||u.error}},eg=e=>[h.co.CREATED,h.co.PENDING,h.co.UPDATING].includes(e),ef=e=>eg(e.status.state),e_=e=>[h.co.FAILED,h.co.UPDATE_FAILED].includes(e.status.state),ev=e=>{if(e instanceof f.Hx)return e instanceof f.Hx&&"access_denied"===e.errorCode},ey=()=>{let{addError:e}=(0,g.e)(),n=(0,p.useQueryClient)();return(t,i)=>{ev(t)&&(e("Please try again. You may need to reconnect with your ".concat(h.hP[i.sync_source_type]," account.")),y.Su.forEach(e=>{n.invalidateQueries({queryKey:[e]})}),n.invalidateQueries({queryKey:[y.cF]}))}},eh=(e,n)=>{let{data:t}=I(),i=(0,d.Cf)(),{value:r}=(0,v.F)(n||"cinnabon_enabled"),a=!!(null==t?void 0:t.find(n=>n.type===e&&n.enabled));return!!(r&&(!i||a))}},21878:function(e,n,t){t.d(n,{K:function(){return u}});var i=t(19170),r=t(27218),a=t(7653);function u(){let{mutate:e,isPending:n}=(0,i.Ck)(),{account:t}=(0,r.t)();return{dismiss:(0,a.useCallback)(n=>{var i;t&&e({...t.settings,dismissed_claudeai_banners:[...(null==t?void 0:null===(i=t.settings)||void 0===i?void 0:i.dismissed_claudeai_banners)||[],{banner_id:n,dismissed_at:new Date().toISOString()}]})},[t,e]),isDismissed:(0,a.useCallback)(e=>{var n,i;return(null==t?void 0:null===(i=t.settings)||void 0===i?void 0:null===(n=i.dismissed_claudeai_banners)||void 0===n?void 0:n.some(n=>n.banner_id===e))||!1},[t]),isPending:n}}},51879:function(e,n,t){t.d(n,{J:function(){return l},Q:function(){return c}});var i=t(27573),r=t(35919),a=t.n(r),u=t(7653);let o=(0,u.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:a(),closeModal:a(),clearCallerIdentifier:a()}),c=e=>{let{children:n}=e,[t,r]=(0,u.useState)(!1),a=(0,u.useRef)(void 0),[c,l]=(0,u.useState)(void 0);return(0,i.jsx)(o.Provider,{value:{isOpen:t,openModal:e=>{r(!0),a.current=e},closeModal:()=>{r(!1),l(a.current)},dropdownToOpen:c,clearCallerIdentifier:()=>{l(void 0)}},children:n})},l=()=>(0,u.useContext)(o)},22534:function(e,n,t){t.d(n,{F7:function(){return u},MU:function(){return a},ZZ:function(){return o}});let i="recentDriveDocs";function r(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function a(e){localStorage.setItem(i,JSON.stringify(e))}function u(){let e=localStorage.getItem(i);if(e){let n=JSON.parse(e);if(n&&Array.isArray(n)&&n.every(r))return n}return[]}function o(e){let n=u();a(n=n.filter(n=>n.uri!==e))}},19170:function(e,n,t){t.d(n,{Ck:function(){return m},IR:function(){return _},Pd:function(){return v},Uc:function(){return h},W1:function(){return s},_y:function(){return y},fb:function(){return S},gq:function(){return E},k7:function(){return b},ml:function(){return f},wO:function(){return d},yU:function(){return g},yq:function(){return p}});var i=t(3053),r=t(5362),a=t(8571),u=t(29305),o=t(13262),c=t(77930),l=t(81695);function s(e,n){return(0,r.WE)("/api/auth/login_methods?email=".concat(e,"&source=").concat(n),{enabled:!!e&&(0,u.vV)(e),meta:{noToast:!0}})}let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,i.z$)(),t=(0,a.Z)();return(0,r.uC)("/api/auth/send_magic_link","POST",{...e,onSuccess:(t,i,r)=>{t.sso_url?n({event_key:"login.email.sso_initiated"}):n({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(t,i,r)},onError:(t,i,r)=>{n({event_key:"login.email.magic_link_send_error",error:t.message}),e.onError&&e.onError(t,i,r)},onMutate:e=>{n({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,a.Z)();return(0,r.uC)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:n?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,i.z$)(),t=(0,a.Z)();return(0,r.uC)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(t,i,r)=>{"code"===i.credentials.method?n({event_key:"login.email.finished"}):n({event_key:"login.email.magic_link_success"}),e.onSuccess&&e.onSuccess(t,i,r)},onError:(t,i,r)=>{"code"===i.credentials.method?n({event_key:"login.email.code_verification_error",error:t.message}):n({event_key:"login.email.magic_link_verification_error",error:t.message}),e.onError&&e.onError(t,i,r)},onMutate:e=>{"code"===e.credentials.method?n({event_key:"login.email.verifying_code"}):n({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,i.z$)(),t=(0,a.Z)(),u=(0,l.useRouter)();return(0,r.uC)("/api/auth/verify_google","POST",{...e,onSuccess:(t,i,r)=>{!t.success&&t.sso_url?(n({event_key:"login.email.sso_initiated"}),u.push(t.sso_url)):(n({event_key:"login.google.finished"}),e.onSuccess&&e.onSuccess(t,i,r))},onError:(t,i,r)=>{n({event_key:"login.google.verification_error",error:t.message}),e.onError&&e.onError(t,i,r)},onMutate:e=>{n({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:t?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:n}=(0,i.z$)(),t=(0,a.Z)(),u=(0,l.useRouter)();return(0,r.uC)("/api/auth/accept_invite","POST",{...e,onSuccess:(t,i,r)=>{!t.success&&t.sso_url?(n({event_key:"login.email.sso_initiated"}),u.push(t.sso_url)):e.onSuccess&&e.onSuccess(t,i,r)},transformVariables:e=>({...e,source:t?"claude":"console"})})},y=()=>(0,r.uC)("/api/auth/logout","POST"),h=()=>(0,r.uC)("/api/auth/logout/all-sessions","POST"),p=()=>{let e=(0,c.useQueryClient)();return(0,r.uC)("/api/account","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[o.aY]})}})},m=()=>(0,r.Ne)("/api/account","PUT",(e,n)=>(null==n?void 0:n.account)?{...n,account:{...n.account,settings:e}}:n,{queryKey:[o.aY],transformVariables:e=>({settings:e})}),b=()=>{let e=(0,c.useQueryClient)();return(0,r.uC)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[o.aY]})}})};function E(e){return(0,r.WE)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function S(e,n,t){let{track:a}=(0,i.z$)();a({event_key:"login.email.sso_verifying_callback"});let u=(0,r.WE)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(n,"&source=").concat(t),{meta:{noToast:!0}});return a(u.isError?{event_key:"login.email.sso_verification_error",error:u.error.message}:{event_key:"login.email.sso_success"}),u}},32737:function(e,n,t){t.d(n,{u:function(){return d}});var i=t(56683),r=t(27573),a=t(9788),u=t(85638),o=t(10607),c=t(68425);function l(){let e=(0,i._)(["\n  px-2\n  py-1\n  text-xs\n  font-medium\n  font-sans\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return l=function(){return e},e}function s(){let e=(0,i._)(["\n  max-w-[310px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return s=function(){return e},e}function d(e){let{children:n,tooltipContent:t,contentStyle:i="default",side:a="top",align:c,className:l,delayDuration:s=200,...d}=e,g=_[i];return(0,r.jsx)(u.zt,{delayDuration:s,children:(0,r.jsxs)(u.fC,{...d,children:[(0,r.jsx)(u.xz,{asChild:!0,children:n}),(0,r.jsx)(u.h_,{children:(0,r.jsx)(g,{className:(0,o.Z)(l,!t&&"hidden"),sideOffset:5,side:a,align:c,children:t})})]})})}let g=(0,a.q)(u.VY)(l()),f=(0,a.q)(u.VY)(s()),_={default:g,citation:e=>{let{children:n,...t}=e;return(0,r.jsx)(f,{...t,children:(0,r.jsx)(c.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-3 text-sm font-normal font-styrene leading-tight rounded-lg border-0.5 shadow-[0_4px_24px_0_hsl(var(--always-black)/4%)] border-border-300/25 text-text-200 bg-bg-100 break-words",children:n})})}}},29305:function(e,n,t){t.d(n,{KS:function(){return a},vV:function(){return r}});let i=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,r=e=>i.test(e),a=(e,n)=>{if(!n)return!1;let t=e.split("@")[1];return n.includes(t)}},10228:function(e,n,t){var i,r,a,u;t.d(n,{Fg:function(){return i},co:function(){return r},hP:function(){return o},qC:function(){return c}}),(a=i||(i={})).GITHUB="github",a.GDRIVE="gdrive",a.OUTLINE="outlin",a.SALESFORCE="sfdc",a.GMAIL="gmail",a.GCAL="gcal",a.SLACK="slack",a.ASANA="asana";let o={github:"GitHub",gdrive:"Google Drive",outlin:"Outline",sfdc:"Salesforce",gmail:"Gmail",gcal:"Google Calendar",slack:"Slack",asana:"Asana"};(u=r||(r={})).CREATED="created",u.PENDING="pending",u.FAILED="failed",u.UPDATING="updating",u.UPDATE_FAILED="update_failed",u.READY="ready",u.UNAUTHENTICATED="unauthenticated",u.ACCESS_DENIED="access_denied",u.DISABLED="disabled";let c=["access_denied","failed","unauthenticated","update_failed"]}}]);